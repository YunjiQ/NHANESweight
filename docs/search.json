[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "NHANES Weight History",
    "section": "",
    "text": "1 Introduction\nHow do you consider your weight? Have you ever tried to lose weight in the past few years? It is interesting to observe that weight loss has become a prevalent concern in the lives of many adults. More and more people started to lose weight and focus on achieving a balanced and fit body, which prompted a growing interest in scientific and efficient methods to achieve this goal.\nThe National Health and Nutrition Examination Survey (NHANES) is a program conducted by the National Center for Health Statistics (NCHS), which is part of the Centers for Disease Control and Prevention (CDC) in the United States. Under the guidance of the CDC, NHANES empowers researchers, policymakers, and healthcare professionals with the tools to understand health trends, identify emerging issues, and tailor interventions to the specific needs of diverse populations.\nRecognizing the significance of this health endeavor, the NHANES conducted a survey on the weight history on a two-year cycle basis to keep the information updated. The survey targeted thousands of participants aged 16 years and older, encompassing individuals with diverse habits and racial backgrounds. The primary objective of this survey is to investigate the dynamics of weight loss during the past 12 months and explore the methods that are endeavored by its participants to lose or maintain their weight.\nWith the survey data from NHANES, we can gain some insights from exploring this large sample. In this project, we will be practically interested in exploring the effective impact factors of weight loss, answering questions like how psychological intent promotes the performance of weight loss, whether a strict diet helps lose weight, and what kind of dietary habit would benefit weight loss. We will focus on the questionnaire data, which indicates the self-reported weight changes and some related factors. We will conduct data pre-processing, trend analysis, correlation study, and statistic tests. According to the research on the data set, we will be able to conclude the most obvious and possible method or combination of methods for controlling the weights."
  },
  {
    "objectID": "data.html#description",
    "href": "data.html#description",
    "title": "2  Data",
    "section": "2.1 Description",
    "text": "2.1 Description\nThe project utilizes data from the National Health and Nutrition Examination Survey (NHANES), obtained from the Questionnaires, Datasets, and Related Documentation section covering the cycles spanning from 2017 to March 2020.\nThe data is collected by the National Center for Health Statistics (NCHS) under the Centers for Disease Control and Prevention (CDC) through interviews and questionnaires. NHANES employs a comprehensive approach to data collection. Trained interviewers conduct in-person interviews and ask questions by using the Computer-Assisted Personal Interview (CAPI) system. The questionnaire gathers a broad range of dimensions on demographics, health status, dietary habits, and lifestyle factors directly from participants. Participants aged 16 years and older in the NHANES 2017-March 2020 pre-pandemic sample were eligible. However, eligibility varies by age for some questions.\nNHANES data are collected in different formats. Questionnaire responses are recorded in a structured manner. Laboratory test results and physical measurements are often numerical. In this project, we will utilize the questionnaire responses to record the self-reported weight changes and some related factors. The research will be conducted surrounding the possible impact factor for weight loss, and the detailed research plan shown in section 2.2. The dimension for the original data set is 10195 samples with 36 features. However, based on the research questions, we will select the relevant features and conduct pre-processing, and the pre-processed data set has 4781 objects with 17 features.\nNHANES is conducted a two-year cycle starting 1999. While the new data is collected regularly, the release of updated datasets may not occur as frequently, and the data from 2021 to 2023 is currently unavailable. In our project, we use the data from 2017 to March 2020 Pre-Pandemic instead of the data from 2019 to 2020 because of the immediate pandemic effects. The NHANES program suspended field operations in March 2020 due to the coronavirus disease pandemic. As a result, data collection for the NHANES 2019-2020 cycle remained incomplete and the collected data are not nationally representative. To address this problem, data collected from 2019 to March 2020 were combined with data from the NHANES 2017-2018 cycle to form a nationally representative sample of NHANES 2017-March 2020 pre-pandemic data.\nWhile the NHANES dataset is generally reliable and valuable, it is essential to be aware of potential issues and limitations when working with this data.\n\nThe complex sampling methodology may introduce sampling error, and non-response bias could affect the generalizability of the findings.\nSome information, such as dietary habits and lifestyle factors, is self-reported and subject to recall bias. Participants may not always accurately remember or report their behaviors, leading to potential inaccuracies.\nWhile NHANES captures a broad range of health indicators, it may not fully address all dimensions of health disparities. Certain subgroups may be underrepresented or face unique health challenges not fully captured in the survey.\n\nImport the data:\n\nDownload the “P_WHQ Data” XPT file from the CDC website.\nImport and read the data in RStudio with read_xpt() function.\n\nDocumentation and Links:\nNational Health and Nutrition Examination Survey (NHANES) 2017-March 2020 Data Documentation, Codebook, and Frequencies: https://wwwn.cdc.gov/nchs/nhanes/search/datapage.aspx?Component=Questionnaire&Cycle=2017-2020"
  },
  {
    "objectID": "data.html#research-plan",
    "href": "data.html#research-plan",
    "title": "2  Data",
    "section": "2.2 Research Plan",
    "text": "2.2 Research Plan\n\n2.2.1 Distribution of Basic Health Metrics\nAn analysis of key health indicators, including weight and height will be conducted. We will also calculate and show each sample’s BMI for further research.\n\n\n2.2.2 Age Distribution at Heaviest Weight\nThe study will examine the distribution of participants’ self-reported heaviest weight across various ages to identify whether there is a common age period for weight gain.\n\n\n2.2.3 Longitudinal BMI Changes\nSince BMI is more scientific and representative of personal weight health, trends and patterns in BMI changes will be analyzed longitudinally to understand the dynamics of weight management over time.\n\n\n2.2.4 Correlation Analysis Between Factors and BMI Change\n\nExamining Weight Loss Intentions\nThe concordance between individuals’ weight loss intentions and actual BMI changes will be explored.\nDieting and BMI\nThe relationship between dieting behaviors (e.g. skipping meals, eating less) and BMI changes.\nDietary Preferences\nThe association between dietary preferences and BMI trajectories will be assessed.\nCombined Impact\nA multivariate approach will be used to understand the collective impact of various factors on BMI changes."
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.3 Missing value analysis",
    "text": "2.3 Missing value analysis\nAfter pre-processing, some irrelevant features have been removed. Moreover, the original representative strings have been converted to meaningful values based on the given code book. And currently, we will look into the missing value pattern for the pre-processed data set.\n\n\nCode\nlibrary(mi)\n\n# read the pre-processed data from csv\nraw_whq &lt;- read.csv(\"data/p_whq_new.csv\")\n\n# show original missing-value plot\nbefore &lt;- missing_data.frame(raw_whq)\nimage(before)\n\n\n\n\n\nWith the above plot given the pattern of the missing value, we can observe that the missing value lies in the features of current_height and age_heaviest_weight. The missing value in this data set is relatively few and we choose to delete the rows that contain these missing values (NA). After the operation, we obtain a new plot showing the pattern for the whole data set. Right now, the whole data set doesn’t contain the missing value as shown below.\n\n\nCode\nlibrary(dplyr)\n# handle missing value\nwhq_handle_missing &lt;- raw_whq |&gt;\n  filter(!is.na(current_height)) |&gt;\n  filter(!is.na(current_weight)) |&gt;\n  filter(!is.na(previous_weight)) |&gt;\n  filter(!is.na(age_heaviest_weight))\n\n# show after-version missing-value plot\nafter &lt;- missing_data.frame(whq_handle_missing)\nimage(after)\n\n\n\n\n\nCode\nwrite.csv(whq_handle_missing, \"data/whq_handle_missing.csv\", row.names = FALSE)"
  },
  {
    "objectID": "results.html#scatterplot-with-contour-line---height-vs.-weight-by-gender",
    "href": "results.html#scatterplot-with-contour-line---height-vs.-weight-by-gender",
    "title": "3  Results",
    "section": "3.1 Scatterplot with Contour Line - Height vs. Weight by Gender",
    "text": "3.1 Scatterplot with Contour Line - Height vs. Weight by Gender\nWe utilize a scatter plot with contour lines to view the fundamental characteristics of heights and weights categorized by gender. Prior to creating the plot, extreme values of weights and heights were identified and removed to mitigate the potential influence of outliers on the overall patterns. The comprehensive plot, encompassing all genders, reveals a positive correlation between height and weight. This correlation aligns with our intuitive understanding: as height increases, so does weight.\nThe density contour lines play a crucial role in illustrating regions of heightened data point concentration. A prominent cluster dominates the plot, indicating that heights tend to concentrate between 60 and 70 inches, while weights concentrate between 100 and 250 pounds. Noteworthy outliers are present on the plot, with a particularly intriguing observation: the majority of outliers are females with heavier weights.\n\n\nCode\nwhq1 &lt;- whq |&gt;\n  filter(current_height &lt; 100) |&gt;\n  filter(current_weight &lt; 600)\n\nggplot(whq1, aes(current_height, current_weight)) +\n  geom_point(alpha = 0.5, aes(color = gender)) +\n  geom_density_2d(alpha = 0.5) +\n  labs(title = \"Height vs. Weight by Gender\",\n       x = \"Current Height\",\n       y = \"Current Weight\")"
  },
  {
    "objectID": "results.html#longitudinal-bmi-changes",
    "href": "results.html#longitudinal-bmi-changes",
    "title": "3  Results",
    "section": "3.2 Longitudinal BMI Changes",
    "text": "3.2 Longitudinal BMI Changes\nAs we delve deeper into our exploration of health metrics, we turn our attention to Body Mass Index (BMI), a widely used measure that provides insights into the relationship between an individual’s weight and height. BMI is a numerical value calculated by dividing an individual’s weight in pounds by the square of their height in inches. We use the BMI formula given by CDC to calculate each person’s previous and current BMI:\n\\[\n\\frac{Weight(lb)}{height(in)^2} \\cdot 703\n\\]\nWe utilize the following BMI categories ranging from underweight to obese in the chart below:\n\n\n\nBMI\nWeight Status\n\n\n\n\nBelow 18.5\nUnderweight\n\n\n18.5 - 24.99\nHealthy Weight\n\n\n25.0 - 29.99\nOverweight\n\n\n30.0 and above\nObesity"
  },
  {
    "objectID": "results.html#heatmap---previous-bmi-vs.-current-bmi",
    "href": "results.html#heatmap---previous-bmi-vs.-current-bmi",
    "title": "3  Results",
    "section": "3.3 Heatmap - Previous BMI vs. Current BMI",
    "text": "3.3 Heatmap - Previous BMI vs. Current BMI\nBased on the BMI we calculated, we use a heatmap to take a look at the overall counts for both previous BMI and current BMI. The diagonal trend observed from the bottom left to the top right suggests that many individuals have remained within a similar BMI category. The lighter squares along the diagonal implies a consistency in BMI over time for a substantial number of participants. However, there are also some lighter squares off the diagonal, indicating that there have been changes in BMI for some individuals either towards the higher or lower end. The heatmap also shows a concentrated cluster of values within the BMI range of 20 to 30.\nTo better take a look at the current BMI level of each clusters, we add overlaid points onto the heatmap, color-coded based on the current BMI level. The resulting visualization vividly illustrates that the majority of individuals within this BMI range are classified as overweight, and there do has a large amount of people are classified as health weight and obese.\n\n\nCode\nggplot(whq1, aes(prev_bmi, curr_bmi)) +\n  geom_hex(binwidth = c(5, 5)) + \n  scale_fill_gradient(low = \"lightblue\", high = \"darkblue\") +  \n  labs(title = \"Previous BMI vs. Current BMI\",\n       x = \"Previous BMI\",\n       y = \"Current BMI\")\n\n\n\n\n\n\n\nCode\nggplot(whq1, aes(prev_bmi, curr_bmi)) +\n  geom_hex(binwidth = c(5, 5)) + \n  scale_fill_gradient(low = \"lightblue\", high = \"darkblue\") + \n  geom_point(aes(color = curr_bmi_level), alpha = 0.5) +\n  labs(title = \"Previous BMI vs. Current BMI with BMI Level\",\n       x = \"Previous BMI\",\n       y = \"Current BMI\")"
  },
  {
    "objectID": "results.html#alluvial---bmi-level-change",
    "href": "results.html#alluvial---bmi-level-change",
    "title": "3  Results",
    "section": "3.4 Alluvial - BMI Level Change",
    "text": "3.4 Alluvial - BMI Level Change\nTo see the dynamics of BMI level changes over time, we employed an alluvial plot to see the transitions between different BMI categories from the previous year to the current year. As the graph shows, a substantial amount of individuals have maintained a consistent BMI level, with a notable concentration in obese category.\nIn instances of BMI level changes, the most prominent transition is observed in individuals moving from the obese level to overweight. A smaller yet noteworthy group has significant weight loss, transitioning from obese to healthy weight. And there also have some individuals transition from overweight to a healthy weight, reflecting positive changes in lifestyle and weight management strategies. Conversely, there are instances where individuals have moved from healthier BMI level to overweight or obese.\n\n\nCode\nlibrary(ggalluvial)\n\nchange &lt;- whq1 |&gt;\n      group_by(prev_bmi_level, curr_bmi_level) |&gt;\n      summarise(frequency = n(), .groups = 'drop') |&gt;\n      rename(\"Freq\" = frequency)\n\nggplot(change, aes(y = Freq, axis1 = prev_bmi_level, axis2 = curr_bmi_level)) +\n      geom_alluvium(aes(fill = prev_bmi_level), width = 1/12) +\n      geom_stratum(width = 1/12) +\n      geom_label(stat = \"stratum\", aes(label = paste(after_stat(stratum), \"\\n\", after_stat(count))), size = 2.5) +\n      scale_x_discrete(expand = c(0.05, 0.05)) +\n      scale_fill_brewer(type = \"qual\", palette = \"RdBu\", direction = -1) +\n      labs(title = \"BMI Level Change\") +\n      annotate(\"text\", x = 1, y = 0, label = \"prev_bmi_level\", vjust = 1.5, hjust = 0.5) +\n      annotate(\"text\", x = 2, y = 0, label = \"curr_bmi_level\", vjust = 1.5, hjust = 0.5) +\n      theme(axis.title.x = element_blank())"
  },
  {
    "objectID": "results.html#grouped-bar-chart---current-bmi-by-age",
    "href": "results.html#grouped-bar-chart---current-bmi-by-age",
    "title": "3  Results",
    "section": "3.5 Grouped Bar Chart - Current BMI by Age",
    "text": "3.5 Grouped Bar Chart - Current BMI by Age\nIn our exploration of the interplay between age and BMI, we crafted a grouped bar chart to show the distribution of current BMI across distinct age groups. The chart shows a prevalence of ‘Overweight’ and ‘Obese’ categories across all age groups, indicated by the taller bars in these categories. Conversely, the ‘Healthy Weight’ category appears to have fewer individuals, particularly in the middle age ranges. An interesting balance is noted in the BMI levels for teenagers in the 11-20 age groups, with a distribution that appears more evenly spread among different categories.\n\n\nCode\nwhq$age_group &lt;- cut(whq$age_heaviest_weight,\n                     breaks = c(10, 20, 30, 40, 50, 60, 70, 80),\n                     labels = c(\"11-20\", \"21-30\", \"31-40\", \"41-50\", \"51-60\", \"61-70\", \"71-80\"),\n                     include.lowest = TRUE)\n\nwhq$curr_bmi_level &lt;- factor(whq$curr_bmi_level, \n                        levels = c('Underweight', 'Healthy Weight', 'Overweight', 'Obese'))\n\nggplot(whq, aes(x = curr_bmi_level, fill = curr_bmi_level)) + \n  geom_bar() + \n  scale_fill_brewer(name = \"Levels\", palette = \"PuBu\") + \n  facet_grid(. ~ age_group ) +\n  scale_x_discrete(name = \"BMI Level\") + \n  scale_y_continuous(name = \"Counts\") +\n  ggtitle('Current BMI Level by Age') +\n  theme(plot.title = element_text(hjust = 0.5, size = 14),\n        axis.text.x = element_text(angle = 45, hjust = 1))"
  },
  {
    "objectID": "results.html#violin-plot---bmi-distribution-by-race",
    "href": "results.html#violin-plot---bmi-distribution-by-race",
    "title": "3  Results",
    "section": "3.6 Violin Plot - BMI Distribution by Race",
    "text": "3.6 Violin Plot - BMI Distribution by Race\nWe use a violin plot to provide a visual comparison of BMI distributions across the race groups. Some races, such as non-Hispanic Black and other Race, show a wider distribution of BMI, indicating more variability within these groups. Conversely, others groups have a narrower distribution, suggesting more uniform BMI values.\nThe median BMI values vary by group, with non-Hispanic Black shows a higher median and non-Hispanic Asian shows a comparatively smaller median. Additionally, the plot reveals a prevalent right skewed trend with longer tail towards higher BMI values in most groups. Notably, Non-Hispanic Asian is more closely resembling normality, showcasing a balanced and symmetric BMI profile. The existence of outliers within each group further emphasizes the diversity of BMI values.\n\n\nCode\nggplot(whq, aes(x = curr_bmi, y = race, fill = race)) + \n  geom_violin(trim=FALSE) +\n  geom_boxplot(width=0.1, fill=\"white\") +\n  labs(title=\"BMI Distribution among Race\",x=\"BMI\", y = \"Race\") +\n  scale_fill_brewer(palette=\"Set3\")"
  },
  {
    "objectID": "results.html#pyramid-chart---age-of-the-heaviest-weight-distribution-by-gender",
    "href": "results.html#pyramid-chart---age-of-the-heaviest-weight-distribution-by-gender",
    "title": "3  Results",
    "section": "3.7 Pyramid Chart - Age of the Heaviest Weight Distribution by Gender",
    "text": "3.7 Pyramid Chart - Age of the Heaviest Weight Distribution by Gender\n\n\nCode\n# min(whq$age_heaviest_weight) # 12\n# max(whq$age_heaviest_weight) # 99999\n# nrow(whq[whq$age_heaviest_weight &gt; 80, ]) # 21  \n\nwhq$age_group &lt;- cut(whq$age_heaviest_weight,\n                     breaks = c(10, 20, 30, 40, 50, 60, 70, 80),\n                     labels = c(\"11-20\", \"21-30\", \"31-40\", \"41-50\", \"51-60\", \"61-70\", \"71-80\"),\n                     include.lowest = TRUE)\n\nplot_data &lt;- whq %&gt;%\n  group_by(age_group, gender) %&gt;%\n  summarise(count = n()) %&gt;%\n  ungroup()\n\nplot_data$count[plot_data$gender == \"female\"] &lt;- -plot_data$count[plot_data$gender == \"female\"]\n\nggplot(plot_data, aes(x = count, y = age_group, fill = gender)) +\n  geom_bar(stat = \"identity\", position = \"identity\", color = \"black\", alpha = 0.7) +\n  geom_text(aes(label = abs(count), hjust = ifelse(count &lt; 0, 1.1, -0.1)), color = \"black\", size = 3) +\n  labs(title = \"Age Distribution by Gender\",\n       x = \"Position\",\n       y = \"Count\") +\n  scale_x_continuous(labels = abs) + \n  theme_minimal()"
  },
  {
    "objectID": "results.html#correlation-analysis-between-factors-and-bmi-change",
    "href": "results.html#correlation-analysis-between-factors-and-bmi-change",
    "title": "3  Results",
    "section": "3.8 Correlation Analysis Between Factors and BMI Change",
    "text": "3.8 Correlation Analysis Between Factors and BMI Change\n\n3.8.1 Radar Chart - Weight Loss Intentions & Behavior by Loss Weight Methods\nThe radar chart provides a multi-faceted into the dietary intention and behaviors of individuals across various factors. The axes radiating from the center represent different dietary factors including ‘eat less,’ ‘less fat,’ ‘fewer carbs,’ ‘less sugar,’ ‘more vegetables,’ ‘low calories,’ and ‘skipping meals’. Each axis is scored from 0 to 100%, indicating the percentage of individuals who either intend to or actually engage in the behavior associated with each factor.\nThe chart shows that for most dietary factors, the intention to engage in a specific behavior is higher than the actual behavior itself. Less than half of the people who have intention to lose weight actually behavior on it. The greatest discrepancy between intention and behavior appears in ‘eat less’ and ‘more vege’. And more people behavior on lossing weight by ‘eat less’, ‘more vege’, and ‘less suger’\n```{{r warning=FALSE, message=FALSE}} library(fmsb) library(dplyr)\nwhq_intent &lt;- sapply(subset(whq, change_intentional == TRUE & change_behavior == FALSE, select=eat_less:less_fat),as.logical)\nwhq_behavior &lt;- sapply(subset(whq, change_intentional == FALSE & change_behavior == TRUE, select=eat_less:less_fat), as.logical)\nwhq_intent_counts &lt;- colSums(whq_intent) whq_intent_df &lt;- t(as.data.frame(whq_intent_counts)) whq_behavior_counts &lt;- colSums(whq_behavior) whq_behavior_df &lt;- t(as.data.frame(whq_behavior_counts))\nwhq_int_beh &lt;- as.data.frame(rbind(rep(2000,1800) , rep(200,400), whq_intent_df, whq_behavior_df))\nradarchart(whq_int_beh, axistype = 1, pcol = c(“lightblue”, “orange”), plwd = 2, cglcol=“grey”, cglty=1, axislabcol=“grey”, cglwd=0.8, vlcex = 1 )\nlegend(“right”, legend = c(“Intention”, “Behavior”), col = c(“lightblue”, “orange”), lty = 1, lwd = 2, pch = c(10, 10), pt.cex = 1, cex = 0.8)\n\n### Mosaic Plot - Dieting and BMI\n\n```{r warning=FALSE, message=FALSE, fig.width=12, fig.height=8}\nlibrary(grid)\nlibrary(vcd)\nlibrary(RColorBrewer)\n\n# mosaic plot\ndieting_sub_df &lt;- whq |&gt;\n  group_by(bmi_level_change, eat_less, skip_meal, low_cal) |&gt;\n  summarise(frequency = n(), .groups = 'drop') |&gt;\n  rename(\"Freq\" = frequency)\n\nmosaic(bmi_level_change ~ eat_less + skip_meal + low_cal, dieting_sub_df , direction = c(\"v\", \"v\", \"h\", \"h\"),\n       highlighting_fill= rev(brewer.pal(3, \"RdBu\")),\n       rot_labels = 0,\n       margins = c(5, 10, 10, 10),\n       main = \"Mosaic plot for Dieting and BMI\")\n\nDietary Preferences\n\n\n\nCode\nlibrary(tidyverse)\nlibrary(dplyr)\n\npreference_sub_df &lt;- whq |&gt;\n  group_by(bmi_level_change, more_vege, less_sugar, fewer_carb, less_fat) |&gt;\n  summarise(frequency = n(), .groups = 'drop') |&gt;\n  rename(\"Freq\" = frequency)\n\nwhq_dietary &lt;- preference_sub_df\n\nempty_bar &lt;- 4\nto_add &lt;- data.frame( matrix(NA, empty_bar*nlevels(whq_dietary$bmi_level_change), ncol(whq_dietary)) )\ncolnames(to_add) &lt;- colnames(whq_dietary)\nto_add$bmi_level_change &lt;- rep(levels(whq_dietary$bmi_level_change), each=empty_bar)\nwhq_dietary &lt;- rbind(whq_dietary, to_add)\nwhq_dietary &lt;- whq_dietary |&gt; arrange(bmi_level_change)\nwhq_dietary$id &lt;- seq(1, nrow(whq_dietary))\n\n# Get the name and the y position of each label\nlabel_data &lt;- whq_dietary\nnumber_of_bar &lt;- nrow(label_data)\nangle &lt;- 90 - 360 * (label_data$id-0.5) /number_of_bar     # I substract 0.5 because the letter must have the angle of the center of the bars. Not extreme right(1) or extreme left (0)\nlabel_data$hjust &lt;- ifelse( angle &lt; -90, 1, 0)\nlabel_data$angle &lt;- ifelse(angle &lt; -90, angle+180, angle)\n \nbase_data &lt;- whq_dietary |&gt;\n  group_by(bmi_level_change) |&gt;\n  summarize(start=min(id), end=max(id) - empty_bar) |&gt;\n  rowwise() |&gt;\n  mutate(title=mean(c(start, end)))\n\n# prepare a data frame for grid (scales)\ngrid_data &lt;- base_data\ngrid_data$end &lt;- grid_data$end[ c( nrow(grid_data), 1:nrow(grid_data)-1)] + 1\ngrid_data$start &lt;- grid_data$start - 1\ngrid_data &lt;- grid_data[-1,]\n\n# Make the plot\np &lt;- ggplot(whq_dietary, aes(x=as.factor(id), y=Freq, fill=bmi_level_change)) + \n  \n  geom_bar(aes(x=as.factor(id), y=Freq, fill=bmi_level_change), stat=\"identity\", alpha=0.5) +\n  \n  # Add a val=100/75/50/25 lines. I do it at the beginning to make sur barplots are OVER it.\n  geom_segment(data=grid_data, aes(x = end, y = 300, xend = start, yend = 300), colour = \"grey\", alpha=1, size=0.3 , inherit.aes = FALSE ) +\n  geom_segment(data=grid_data, aes(x = end, y = 200, xend = start, yend = 200), colour = \"grey\", alpha=1, size=0.3 , inherit.aes = FALSE ) +\n  geom_segment(data=grid_data, aes(x = end, y = 100, xend = start, yend = 100), colour = \"grey\", alpha=1, size=0.3 , inherit.aes = FALSE ) +\n  geom_segment(data=grid_data, aes(x = end, y = 0, xend = start, yend = 0), colour = \"grey\", alpha=1, size=0.3 , inherit.aes = FALSE ) +\n  \n  # Add text showing the value of each 100/75/50/25 lines\n  annotate(\"text\", rep(max(whq_dietary$id),4), y = c(0, 100,200, 300), label = c(\"50\", \"150\", \"250\", \"350\"), color=\"grey\", size=2 , angle=0, fontface=\"bold\", hjust=1) +\n  \n  geom_bar(aes(x=as.factor(id), y=Freq, fill=bmi_level_change), stat=\"identity\", alpha=0.5) +\n  ylim(-50,250) +\n  theme_minimal() +\n  theme(\n    legend.position = \"none\",\n    axis.text = element_blank(),\n    axis.title = element_blank(),\n    panel.grid = element_blank(),\n    plot.margin = unit(rep(-1,4), \"cm\") \n  ) +\n  coord_polar() + \n  geom_text(data=label_data, aes(x=id, y=Freq+10, label=id), color=\"black\", fontface=\"bold\",alpha=0.6, size=2.5, angle= label_data$angle, inherit.aes = FALSE ) +\n  \n  # Add base line information\n  geom_segment(data=base_data, aes(x = start, y = -5, xend = end, yend = -5), colour = \"black\", alpha=0.8, size=0.6 , inherit.aes = FALSE )  +\n  geom_text(data=base_data, aes(x = title, y = -18, label=bmi_level_change), colour = \"black\", alpha=0.8, size=4, fontface=\"bold\", inherit.aes = FALSE)\n \np\n\n\n\n\n\n\nMeal and Dietary Combined Impact\n\n\nCode\nlibrary(ggalluvial)\n\nwhq_final &lt;- read.csv(\"data/whq_final.csv\")\n\nwhq_final$prev_bmi_level &lt;- factor(whq$prev_bmi_level, \n                        levels = c('Underweight', 'Healthy Weight', 'Overweight', 'Obese'))\nwhq_final$curr_bmi_level &lt;- factor(whq$curr_bmi_level, \n                        levels = c('Underweight', 'Healthy Weight', 'Overweight', 'Obese'))\n\nchange_final &lt;- whq_final |&gt;\n      group_by(prev_bmi_level, meal_combination, dietary_combination, curr_bmi_level) |&gt;\n      summarise(frequency = n(), .groups = 'drop') |&gt;\n      rename(\"Freq\" = frequency)\n\nggplot(change_final, aes(y = Freq, axis1 = prev_bmi_level, axis2 = meal_combination, axis3 = dietary_combination, axis4 = curr_bmi_level)) +\n      geom_alluvium(aes(fill = prev_bmi_level), width = 1/12) +\n      geom_stratum(width = 1/12) +\n      geom_label(stat = \"stratum\", aes(label = after_stat(stratum))) +\n      scale_x_discrete(expand = c(0.05, 0.05)) +\n      scale_fill_brewer(type = \"qual\", palette = \"RdBu\", direction = -1) +\n      labs(title = \"BMI Level Change\") +\n      annotate(\"text\", x = 1, y = 0, label = \"prev_bmi_level\", vjust = 1.5, hjust = 0.5) +\n      annotate(\"text\", x = 2, y = 0, label = \"meal_combination\", vjust = 1.5, hjust = 0.5) +\n      annotate(\"text\", x = 3, y = 0, label = \"dietary_combination\", vjust = 1.5, hjust = 0.5) +\n      annotate(\"text\", x = 4, y = 0, label = \"curr_bmi_level\", vjust = 1.5, hjust = 0.5) +\n      theme(axis.title.x = element_blank())"
  },
  {
    "objectID": "results.html#pyramid-chart---age-distribution-of-the-heaviest-weight-by-gender",
    "href": "results.html#pyramid-chart---age-distribution-of-the-heaviest-weight-by-gender",
    "title": "3  Results",
    "section": "3.7 Pyramid Chart - Age Distribution of the Heaviest Weight by Gender",
    "text": "3.7 Pyramid Chart - Age Distribution of the Heaviest Weight by Gender\nThis chart counts the age of heaviest weight by gender and segmented into distinct age groups, showing some noteworthy patterns in weight reporting trends. For most age groups, females reported their heaviest weight in higher numbers compared to males. But in our dataset, the total number of male and female are different. The age groups of 21-30 and 31-40 stand out with the highest counts of reported heaviest weight for both genders. This suggests that these age ranges are critical periods where individuals are most likely to gain a heaviest weight. The counts generally decrease for both genders as age increases, particularly beyond the age of 60.\n\n\nCode\nwhq$age_group &lt;- cut(whq$age_heaviest_weight,\n                     breaks = c(10, 20, 30, 40, 50, 60, 70, 80),\n                     labels = c(\"11-20\", \"21-30\", \"31-40\", \"41-50\", \"51-60\", \"61-70\", \"71-80\"),\n                     include.lowest = TRUE)\n\nplot_data &lt;- whq %&gt;%\n  group_by(age_group, gender) %&gt;%\n  summarise(count = n()) %&gt;%\n  ungroup()\n\nplot_data$count[plot_data$gender == \"female\"] &lt;- -plot_data$count[plot_data$gender == \"female\"]\n\nggplot(plot_data, aes(x = count, y = age_group, fill = gender)) +\n  geom_bar(stat = \"identity\", position = \"identity\", color = \"black\", alpha = 0.7) +\n  geom_text(aes(label = abs(count), hjust = ifelse(count &lt; 0, 1.1, -0.1)), color = \"black\", size = 3) +\n  labs(title = \" Age of the Heaviest Weight Distribution by Gender\",\n       x = \"Position\",\n       y = \"Count\") +\n  scale_x_continuous(labels = abs) + \n  theme_minimal()"
  }
]